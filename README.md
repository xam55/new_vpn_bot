üöÄ VPN Telegram Bot (WireGuard)

Telegram-–±–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤—ã–¥–∞—á–∏ VPN-–¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –±–∞–∑–µ WireGuard.
–ë–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–ø–ª–∞—Ç—É, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç VPN-–∫–ª—é—á–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ SSH.

‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

üîê –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è WireGuard-–∫–ª—é—á–µ–π

ü§ñ Telegram-–±–æ—Ç (aiogram)

üí≥ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–ø–ª–∞—Ç—ã —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

üì∏ –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –≤ Telegram

üåç –í—ã–¥–∞—á–∞ –≥–æ—Ç–æ–≤–æ–≥–æ VPN-–∫–æ–Ω—Ñ–∏–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

üîë –ü—Ä—è–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º —á–µ—Ä–µ–∑ SSH

üóÑ SQLite / SQLAlchemy (async)

üß† –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫—Ä–∞—Ç–∫–æ)

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ñ–æ—Ä–º–ª—è–µ—Ç –ø–æ–∫—É–ø–∫—É –≤ –±–æ—Ç–µ

–û–ø–ª–∞—á–∏–≤–∞–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ–∫

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –Ω–∞–∂–∏–º–∞–µ—Ç ¬´–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å¬ª

–ë–æ—Ç:

–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ VPN-—Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH

–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç WireGuard-–∫–ª—é—á–∏

–¥–æ–±–∞–≤–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –≤ wg0

—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–ª—é—á –≤ –ë–î

–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≥–æ—Ç–æ–≤—ã–π –∫–æ–Ω—Ñ–∏–≥

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥ –≤ WireGuard ‚Äî VPN —Ä–∞–±–æ—Ç–∞–µ—Ç

üñ• –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
–õ–æ–∫–∞–ª—å–Ω–æ

Python 3.11+

Git

Windows / Linux / macOS

–°–µ—Ä–≤–µ—Ä (Ubuntu 22.04+)

WireGuard

iptables

SSH-–¥–æ—Å—Ç—É–ø (root –∏–ª–∏ sudo)

üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–ª–æ–∫–∞–ª—å–Ω–æ)
git clone https://github.com/USERNAME/REPO_NAME.git
cd REPO_NAME

python -m venv .venv
source .venv/bin/activate   # Linux / macOS
# –∏–ª–∏
.venv\Scripts\activate      # Windows

pip install -r requirements.txt

‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

BOT_TOKEN=YOUR_TELEGRAM_BOT_TOKEN
ADMIN_IDS=123456789

DB_PATH=data/database/vpn_bot.db

# SSH
SSH_HOST=YOUR_SERVER_IP
SSH_PORT=22
SSH_USER=root
SSH_PASSWORD=YOUR_PASSWORD

# WireGuard
WG_INTERFACE=wg0
WG_PORT=51820
WG_CLIENT_IP_START=10.0.0.2
WG_CLIENT_IP_END=10.0.0.254

‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ
python run.py


–ë–æ—Ç:

–ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ Telegram

–±—É–¥–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å —É–¥–∞–ª—ë–Ω–Ω—ã–º VPN-—Å–µ—Ä–≤–µ—Ä–æ–º –ø–æ SSH

–ù–ï —Ç—Ä–µ–±—É–µ—Ç WireGuard –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

üß† –í–ê–ñ–ù–û (–æ—á–µ–Ω—å)

‚ùó WireGuard –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¢–û–õ–¨–ö–û –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ,
–≥–¥–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å VPN-–∫–ª–∏–µ–Ω—Ç—ã.

–ë–æ—Ç –º–æ–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ:

–∫–ª—é—á–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ç—Ä–∞—Ñ–∏–∫ –∏–¥—ë—Ç —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä

üõ† –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VPN-—Å–µ—Ä–≤–µ—Ä–∞ (Ubuntu)
1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ WireGuard
apt update && apt upgrade -y
apt install -y wireguard iptables-persistent

2Ô∏è‚É£ –í–∫–ª—é—á–∏—Ç—å —Ñ–æ—Ä–≤–∞—Ä–¥–∏–Ω–≥
echo "net.ipv4.ip_forward=1" >> /etc/sysctl.conf
sysctl -p

3Ô∏è‚É£ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π —Å–µ—Ä–≤–µ—Ä–∞
umask 077
wg genkey | tee /etc/wireguard/server_private.key | wg pubkey > /etc/wireguard/server_public.key

4Ô∏è‚É£ –ö–æ–Ω—Ñ–∏–≥ /etc/wireguard/wg0.conf
[Interface]
Address = 10.0.0.1/24
ListenPort = 51820
PrivateKey = <SERVER_PRIVATE_KEY>

PostUp = iptables -A FORWARD -i wg0 -j ACCEPT; \
         iptables -A FORWARD -o wg0 -j ACCEPT; \
         iptables -t nat -A POSTROUTING -s 10.0.0.0/24 -o eth0 -j MASQUERADE

PostDown = iptables -D FORWARD -i wg0 -j ACCEPT; \
           iptables -D FORWARD -o wg0 -j ACCEPT; \
           iptables -t nat -D POSTROUTING -s 10.0.0.0/24 -o eth0 -j MASQUERADE


‚ö†Ô∏è eth0 –∑–∞–º–µ–Ω–∏ –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–∑ ip route

5Ô∏è‚É£ –ó–∞–ø—É—Å–∫ WireGuard
systemctl enable wg-quick@wg0
systemctl start wg-quick@wg0


–ü—Ä–æ–≤–µ—Ä–∫–∞:

wg show

üì± –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ WireGuard

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥ –∏–∑ –±–æ—Ç–∞

–ù–∞–∂–∏–º–∞–µ—Ç Activate

–ò–Ω—Ç–µ—Ä–Ω–µ—Ç –∏–¥—ë—Ç —á–µ—Ä–µ–∑ VPN üéâ

üóÑ –†–∞–±–æ—Ç–∞ —Å –ë–î

SQLite –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–¥–µ—Å—å:

data/database/vpn_bot.db


–ï—Å–ª–∏ –º–æ–¥–µ–ª—å –æ–±–Ω–æ–≤–∏–ª–∞—Å—å ‚Äî –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤—Ä—É—á–Ω—É—é
(–∏–ª–∏ —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏, –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏–º Alembic).

üê≥ Docker (—Å–∫–æ—Ä–æ)

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏.
–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ Docker + docker-compose.

üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ù–µ –∫–æ–º–º–∏—Ç—å .env

–ù–µ –∫–æ–º–º–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

–ò—Å–ø–æ–ª—å–∑—É–π –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è SSH –≤ –ø—Ä–æ–¥–µ

–û–≥—Ä–∞–Ω–∏—á—å –¥–æ—Å—Ç—É–ø –ø–æ IP

üìå Roadmap

 Docker + docker-compose

 QR-–∫–æ–¥—ã –¥–ª—è –∫–æ–Ω—Ñ–∏–≥–æ–≤

 –ü–æ–¥–ø–∏—Å–∫–∏ –∏ –∞–≤—Ç–æ-–ø—Ä–æ–¥–ª–µ–Ω–∏–µ

 PostgreSQL

 Prometheus / –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

 CI/CD

ü§ù –ê–≤—Ç–æ—Ä

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –¥–ª—è –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–∏ –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è.